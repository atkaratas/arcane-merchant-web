<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Arcane Merchant | Shop Management Sim</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --dark-bg: rgba(15, 15, 20, 0.98);
            --parchment: #f4e4bc;
            --ui-font: 'Cinzel', serif;
            --dialogue-font: 'Crimson Text', serif;
            --transition-speed: 0.8s;
            --magical-glow: 0 0 20px rgba(212, 175, 55, 0.4);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body, html {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-color: #050505;
            color: #fff;
            position: fixed;
        }

        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('images/clean-shop-bg.jpg') no-repeat center center;
            background-size: cover;
            z-index: -1;
            filter: brightness(0.7) sepia(0.1);
            animation: slowZoom 40s linear infinite alternate;
            will-change: transform;
        }

        @keyframes slowZoom {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.6) 100%);
            pointer-events: none;
            z-index: 0;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            padding: 20px;
            opacity: 0;
            transition: opacity 1.5s ease-in;
            position: relative;
            z-index: 1;
            text-align: center;
            transform: translateY(-40px);
        }

        .game-container.ready {
            opacity: 1;
            display: flex !important;
        }

        .branding-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: var(--ui-font);
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            z-index: 20;
            margin-bottom: 25px;
        }

        .official-logo {
            max-width: 450px;
            width: 95%;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(212, 175, 55, 0.6)) drop-shadow(0 0 40px rgba(212, 175, 55, 0.2));
            margin-bottom: 5px;
            display: block;
        }

        .branding-container p {
            font-style: italic;
            font-size: 0.9rem;
            color: #ccc;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-align: center;
        }

        .menu-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 10;
            width: 350px !important;
            margin-left: auto !important;
            margin-right: auto !important;
            margin-bottom: 30px;
            justify-content: center;
        }

        .menu-btn {
            background: var(--dark-bg);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--gold);
            padding: 12px 30px;
            font-family: var(--ui-font);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            text-align: center;
            text-decoration: none;
            display: block;
            width: 100%;
        }

        .menu-btn:hover {
            border-color: var(--gold);
            background: rgba(212, 175, 55, 0.1);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .dialogue-wrapper {
            width: 90%;
            max-width: 900px;
            position: fixed;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            z-index: 3000;
        }

        .dialogue-box {
            background: rgba(20, 20, 25, 1);
            border: 2px solid rgba(212, 175, 55, 0.8);
            padding: 25px 35px;
            min-height: 140px;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,1), 0 0 15px rgba(212, 175, 55, 0.1);
            border-radius: 2px;
        }

        .speaker-name {
            position: absolute;
            top: -14px;
            left: 30px;
            background: var(--gold);
            color: #000;
            padding: 3px 18px;
            font-family: var(--ui-font);
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }

        .game-icon-seal {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .dialogue-text {
            font-family: var(--dialogue-font);
            font-size: 1.5rem;
            line-height: 1.4;
            color: #f0f0f0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 20px;
            padding-bottom: 220px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .modal.visible {
            display: flex;
            opacity: 1;
        }

        body.modal-open .branding-container,
        body.modal-open .menu-container {
            opacity: 0;
            pointer-events: none;
        }

        .parchment {
            background: var(--parchment);
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            color: #2c1e0f;
            width: 95%;
            max-width: 750px;
            padding: 40px;
            border-radius: 3px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7), inset 0 0 60px rgba(139, 69, 19, 0.2);
            position: relative;
            font-family: var(--dialogue-font);
            max-height: 65vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .parchment h2 {
            font-family: var(--ui-font);
            margin-bottom: 30px; /* Daha fazla bo≈üluk */
            border-bottom: 1px solid rgba(139, 69, 19, 0.3);
            padding-bottom: 15px;
            color: #5d2e0a;
            text-align: center;
            letter-spacing: 2px;
        }

        .carousel-container {
            position: relative;
            width: 100%;
            height: 450px;
            margin: 20px 0;
            overflow: hidden;
            border: 3px double #5d2e0a;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.2) 0%, rgba(0,0,0,0.4) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .carousel-image {
            position: absolute;
            width: 90%;
            height: 90%;
            object-fit: contain;
            opacity: 0;
            transition: opacity 0.8s ease;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .carousel-image.active {
            opacity: 1;
        }

        /* Common Room Grid */
        .community-links {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }

        .community-item {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: #2c1e0f;
            font-size: 1.1rem;
            padding: 12px;
            border-radius: 4px;
            background: rgba(139, 69, 19, 0.05);
            border: 1px solid rgba(139, 69, 19, 0.1);
            transition: all 0.3s ease;
        }

        .community-item:hover {
            background: rgba(139, 69, 19, 0.1);
            transform: translateY(-2px);
        }

        .community-icon {
            font-size: 1.4rem;
        }

        .rumor-item {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed rgba(139, 69, 19, 0.2);
        }

        @media (max-width: 768px) {
            .game-container { padding-bottom: 220px; transform: translateY(-60px); }
            .official-logo { max-width: 260px; }
            .menu-container { width: 300px !important; gap: 10px; }
            .menu-btn { padding: 10px; font-size: 0.85rem; }
            .dialogue-text { font-size: 1.1rem; }
            .parchment { padding: 30px 20px; max-height: 55vh; }
            .carousel-container { height: 280px; }
            .community-links { grid-template-columns: 1fr; }
        }

        .close-modal { position: absolute; top: 20px; right: 25px; font-size: 2.5rem; cursor: pointer; color: #8b4513; z-index: 10; transition: transform 0.3s; }
        .close-modal:hover { transform: rotate(90deg); }
        .inventory-tag { position: absolute; top: 15px; left: 15px; background: var(--gold); color: #000; padding: 4px 12px; font-family: var(--ui-font); font-weight: bold; font-size: 0.75rem; z-index: 15; opacity: 0; transition: opacity 0.6s; border: 1px solid #000; }
        .inventory-tag.visible { opacity: 1; }
        .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(139, 69, 19, 0.2); color: #5d2e0a; font-size: 2rem; cursor: pointer; z-index: 10; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .carousel-arrow.prev { left: 15px; }
        .carousel-arrow.next { right: 15px; }
        .video-container { 
            position: relative; 
            width: 100%; 
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            background: #000; 
            border: 4px solid var(--gold); 
        }
        video { 
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; 
            height: 100%; 
            object-fit: contain; 
        }
        .findie-logo-fixed { position: fixed; top: 15px; right: 15px; display: flex; align-items: center; gap: 8px; text-decoration: none; color: var(--gold); font-size: 0.7rem; padding: 8px 12px; background: rgba(0,0,0,0.8); z-index: 1000; border: 1px solid rgba(212, 175, 55, 0.3); }
        .studio-logo { height: 25px; }
    </style>
</head>
<body>
    <div class="background"></div>
    <div class="overlay"></div>

    <div id="game-ui" class="game-container">
        <div class="branding-container">
            <img src="images/official_logo.png" alt="Arcane Merchant Logo" class="official-logo">
            <p>MEDIEVAL FANTASY SHOP SIMULATOR ‚Ä¢ APRIL 10 2026</p>
        </div>
        <div class="menu-container">
            <button class="menu-btn" onclick="handleWatch()">Watch Chronicles</button>
            <button class="menu-btn" onclick="handleWares()">Browse Wares</button>
            <button class="menu-btn" onclick="handleRumors()">Ask Rumors</button>
            <button class="menu-btn" onclick="handleCommunity()">The Common Room</button>
            <button class="menu-btn" onclick="handleFeatures()">Shop Systems</button>
            <a href="https://store.steampowered.com/app/4086760/Arcane_Merchant/" target="_blank" class="menu-btn" style="color: #fff; background: linear-gradient(135deg, #1b2838 0%, #2a475e 100%); border-color: #66c0f4; display: flex; align-items: center; justify-content: center; gap: 10px;">
                <img src="images/steam_logo_official.jpg" width="20" height="20" style="border-radius: 50%;">
                Wishlist on Steam
            </a>
        </div>
    </div>

    <div class="dialogue-wrapper">
        <div class="dialogue-box">
            <div class="speaker-name">
                <img src="images/arcane_initial_logo.jpg" class="game-icon-seal" alt="A">
                Master Merchant
            </div>
            <div id="dialogue" class="dialogue-text"></div>
        </div>
    </div>

    <div id="wares-modal" class="modal">
        <div class="parchment">
            <span class="close-modal" onclick="closeModals()">&times;</span>
            <h2>Manifest of Wonders</h2>
            <div class="carousel-container">
                <div id="inventory-tag" class="inventory-tag">RARE</div>
                <button class="carousel-arrow prev" onclick="moveCarousel(-1)">‚ùÆ</button>
                <div id="carousel-track" style="width: 100%; height: 100%; position: relative;"></div>
                <button class="carousel-arrow next" onclick="moveCarousel(1)">‚ùØ</button>
            </div>
            <p id="artifact-description" style="text-align: center; font-weight: bold; color: #5d2e0a; text-transform: uppercase;">‚úß Magically Discovered ‚úß</p>
        </div>
    </div>

    <div id="rumors-modal" class="modal">
        <div class="parchment">
            <span class="close-modal" onclick="closeModals()">&times;</span>
            <h2>Whispers from the Void</h2>
            <div class="rumor-item"><p><strong>‚úß The Lost Caravan:</strong> Rumor has it a shipment of Star-Iron was lost in the Whispering Woods. Finders, keepers, they say...</p></div>
            <div class="rumor-item"><p><strong>‚úß The King's Debt:</strong> The crown is looking for a specific relic to settle a debt with the Iron Bank. High risk, higher reward.</p></div>
            <div class="rumor-item"><p><strong>‚úß Celestial Alignment:</strong> The stars suggest that next month, moon-blessed artifacts will triple in potency‚Äîand price.</p></div>
        </div>
    </div>

    <div id="community-modal" class="modal">
        <div class="parchment">
            <span class="close-modal" onclick="closeModals()">&times;</span>
            <h2>The Common Room</h2>
            <div class="community-links">
                <a href="https://www.findiestudios.com/" target="_blank" class="community-item"><span class="community-icon">üè∞</span> Findie Studios</a>
                <a href="https://discord.gg/findiestudios" target="_blank" class="community-item"><span class="community-icon">‚öîÔ∏è</span> Discord</a>
                <a href="https://x.com/FindieStudios" target="_blank" class="community-item"><span class="community-icon">üìú</span> X / Twitter</a>
                <a href="https://www.youtube.com/@FindieStudios" target="_blank" class="community-item"><span class="community-icon">üõ°Ô∏è</span> YouTube</a>
                <a href="https://www.instagram.com/findiestudios" target="_blank" class="community-item"><span class="community-icon">üè∫</span> Instagram</a>
                <a href="https://www.tiktok.com/@findiestudios" target="_blank" class="community-item"><span class="community-icon">üé≠</span> TikTok</a>
                <a href="https://www.reddit.com/r/arcanemerchant" target="_blank" class="community-item"><span class="community-icon">‚öíÔ∏è</span> Reddit</a>
                <a href="https://www.linkedin.com/company/findiestudios" target="_blank" class="community-item"><span class="community-icon">üóùÔ∏è</span> LinkedIn</a>
            </div>
        </div>
    </div>

    <div id="features-modal" class="modal">
        <div class="parchment">
            <span class="close-modal" onclick="closeModals()">&times;</span>
            <h2>Mastering the Arcane Arts</h2>
            <div class="rumor-item"><p><strong>‚úß Grand Display:</strong> Design a sanctuary for your wares. The placement of an enchanted gem can entice a king.</p></div>
            <div class="rumor-item"><p><strong>‚úß Alchemy & Crafting:</strong> Transform raw essence into legendary artifacts. Your workbench is where myths are forged.</p></div>
            <div class="rumor-item"><p><strong>‚úß Dynamic Economy:</strong> The world is alive. Wars, plagues, and festivals shift the value of your inventory.</p></div>
        </div>
    </div>

    <div id="video-modal" class="modal">
        <div class="parchment" style="max-width: 900px; background: #0a0a0a; border: 2px solid var(--gold);">
            <span class="close-modal" onclick="closeVideoModal()">&times;</span>
            <div class="video-container"><video id="video-player" controls muted playsinline></video></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        const dialogueElement = document.getElementById('dialogue');
        const welcomeText = "Step into the warmth, traveler. Every coin traded is a signal. Will you strengthen the town's infrastructure, or seek to redefine the calculus of your own reward?";
        const merchantDialogues = [
            "Traders from the distant realms arrive without warning and vanish like mist. Timing is the only magic that truly matters here.",
            "In these lands, Fame is a functional currency‚Äîmore potent than gold. A high reputation opens doors that keys cannot touch.",
            "In economic downturns, your reputation is your shield. Social trust is the only armor that softens a market-wide recession.",
            "The Void is cold, but my hearth is always lit. I see you have an eye for the extraordinary... and perhaps the coin to match?",
            "Behold my collection of rare artifacts... each item tells a tale, and some... well, they might just choose you.",
            "Low fame may relegate you to the shadows, but remember: the greatest arbitrage often hides where no one else dares to look.",
            "When guilds unite, even the town's policies bend. Will you seek collective action, or let the 'Invisible Hand' guide your fate?",
            "No two shops are alike. Seek differentiation, find your niche, and hunt for 'hero' artifacts that carry an outsized cachet.",
            "The market never sleeps. A savvy merchant anticipates the cycle before the first ripple appears on the surface."
        ];
        
        let currentDialogueIndex = 0;
        let typeTimeout;
        let isTyping = false;

        function typeWriter(text, element, speed = 30, callback) {
            if (isTyping) clearTimeout(typeTimeout);
            isTyping = true;
            element.innerHTML = "";
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    typeTimeout = setTimeout(type, speed);
                } else {
                    isTyping = false;
                    if (callback) callback();
                }
            }
            type();
        }

        function handleWatch() { showVideoModal(); typeWriter("Behold the memories of the trade... visions of what was and what is yet to come.", dialogueElement); }
        function handleWares() { showModal('wares-modal'); initCarousel(); typeWriter("Behold my collection of rare artifacts...", dialogueElement); }
        function handleRumors() { showModal('rumors-modal'); typeWriter("The walls have ears, and the wind has a tongue.", dialogueElement); }
        function handleCommunity() { showModal('community-modal'); typeWriter("How can you stay updated, you ask? The ravens carry our news.", dialogueElement); }
        function handleFeatures() { showModal('features-modal'); typeWriter("Being a merchant is more than just counting gold. It is an art of logistics.", dialogueElement); }

        function showModal(id) {
            document.getElementById(id).classList.add('visible');
            document.body.classList.add('modal-open');
        }

        function closeModals() {
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('visible'));
            document.body.classList.remove('modal-open');
            stopCarousel();
        }

        function showVideoModal() {
            const modal = document.getElementById('video-modal');
            const video = document.getElementById('video-player');
            const src = 'https://video.fastly.steamstatic.com/store_trailers/4086760/1025836541/d1d348ada576efe61787479707370305904dfecb/1769431428/hls_264_master.m3u8';
            modal.classList.add('visible');
            document.body.classList.add('modal-open');
            if (Hls.isSupported()) {
                let hls = new Hls();
                hls.loadSource(src);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            }
        }

        function closeVideoModal() { document.getElementById('video-player').pause(); closeModals(); }

        let carouselImages = [];
        for (let i = 1; i <= 18; i++) carouselImages.push(`images/inventory/inventory_${i}.jpg`);
        let currentCarouselIndex = 0;
        let carouselInterval;
        let carouselInitialized = false;

        function initCarousel() {
            const track = document.getElementById('carousel-track');
            if (carouselInitialized) { startCarousel(); return; }
            track.innerHTML = '';
            carouselImages.forEach((src, index) => {
                const img = document.createElement('img');
                img.src = src;
                img.className = 'carousel-image' + (index === 0 ? ' active' : '');
                track.appendChild(img);
            });
            carouselInitialized = true;
            startCarousel();
        }

        function startCarousel() {
            stopCarousel();
            carouselInterval = setInterval(() => {
                let next;
                do { next = Math.floor(Math.random() * carouselImages.length); } while (next === currentCarouselIndex);
                showCarouselImage(next);
            }, 4000);
        }

        function stopCarousel() { if (carouselInterval) clearInterval(carouselInterval); }

        function showCarouselImage(index) {
            const imgs = document.querySelectorAll('.carousel-image');
            if (!imgs.length) return;
            imgs.forEach(i => i.classList.remove('active'));
            currentCarouselIndex = (index + imgs.length) % imgs.length;
            imgs[currentCarouselIndex].classList.add('active');
            const tag = document.getElementById('inventory-tag');
            const tags = ['Rare', 'Epic', 'Legendary', 'Ancient', 'Mythical', 'Artifact', 'Relic'];
            tag.classList.remove('visible');
            setTimeout(() => { tag.textContent = tags[Math.floor(Math.random()*tags.length)]; tag.classList.add('visible'); }, 300);
        }

        function moveCarousel(s) { stopCarousel(); showCarouselImage(currentCarouselIndex + s); startCarousel(); }

        window.onload = () => {
            document.getElementById('game-ui').classList.add('ready');
            setTimeout(() => { 
                typeWriter(welcomeText, dialogueElement); 
                setInterval(() => {
                    if (!isTyping) {
                        currentDialogueIndex = (currentDialogueIndex + 1) % merchantDialogues.length;
                        typeWriter(merchantDialogues[currentDialogueIndex], dialogueElement);
                    }
                }, 12000);
            }, 800);
        };

        window.onclick = e => { if (e.target.classList.contains('modal')) closeVideoModal(); };
        window.ontouchstart = e => { if (e.target.classList.contains('modal')) closeVideoModal(); };
    </script>
</body>
</html>